set pagesize 5555
undef sid
SELECT * FROM (
SELECT
    A.SID,
    A.USERNAME,    
    ROUND( (RATIO_TO_REPORT(B.VALUE) OVER ())*100,2) "PCT_CPU"
FROM V$SESSION A,
     V$SESSTAT B
WHERE A.SID = B.SID
  AND A.STATUS = 'ACTIVE'
  AND B.STATISTIC# = ( SELECT STATISTIC# FROM V$STATNAME WHERE NAME = 'CPU used by this session')
ORDER BY 3 DESC 
) WHERE ROWNUM <= 10;

SELECT VALUE FROM V$SESSTAT
WHERE SID = &&sid
AND STATISTIC# = ( SELECT STATISTIC# FROM V$STATNAME WHERE NAME = 'CPU used by this session');